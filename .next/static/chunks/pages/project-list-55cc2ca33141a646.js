(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64],{4370:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project-list",function(){return r(4598)}])},6997:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4848);r(6540);let a=e=>{let{uploadPdf:t}=e;return(0,s.jsx)("div",{className:"custom-loader ".concat(t?"pdf":"")})}},4598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var s=r(4848),a=r(3368),i=r.n(a),n=r(1106),l=r.n(n),o=r(6540),d=r(2405),c=r(9639),p=r(2139),h=r(6715),j=r(6997);let m=e=>{let{setFormData:t,setLoading:r,loading:a}=e,[i,n]=(0,o.useState)(!1),[l,d]=(0,o.useState)(""),c=e=>{e.preventDefault(),e.stopPropagation(),n(!0)},p=e=>{e.preventDefault(),e.stopPropagation(),n(!1)},h=async e=>{try{console.log(e);let t=e.target.files[0],r=new FormData;r.append("file",t),r.append("file",t),r.append("upload_preset","onething-projects"),r.append("cloud_name","deiw8557k");let s=await fetch("https://api.cloudinary.com/v1_1/deiw8557k/image/upload",{method:"POST",body:r});if(!s.ok)throw Error("Error: ".concat(s.statusText));return await s.json()}catch(e){return console.error("Error uploading image:",e),null}};async function m(e){r(!0);let s=(await h(e)).secure_url;console.log(s),r(!1),t(e=>({...e,pdf_link:s}))}let u=e=>{if(e.preventDefault(),e.stopPropagation(),n(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){let t=e.dataTransfer.files[0];"application/pdf"===t.type?(m(e),d(t)):alert("Please upload a PDF file!"),e.dataTransfer.clearData()}};return(0,s.jsx)("div",{children:a?(0,s.jsx)("div",{className:"custom-pdf-input ".concat(i?"dragging":""),onDragOver:c,onDragLeave:p,onDrop:u,children:(0,s.jsx)(j.A,{uploadPdf:!0})}):(0,s.jsxs)("div",{className:"custom-pdf-input ".concat(i?"dragging":""),onDragOver:c,onDragLeave:p,onDrop:u,children:[(0,s.jsx)("input",{type:"file",accept:"application/pdf",className:"file-input",onChange:e=>{let t=e.target.files[0];t&&"application/pdf"===t.type?(m(e),d(t)):alert("Please upload a PDF file!")}}),(0,s.jsx)("div",{className:"placeholder",children:l?(0,s.jsx)("div",{children:l.name}):(0,s.jsxs)("div",{className:"drag-pdf-input",children:[(0,s.jsx)("div",{className:"upload-pdf-svg",children:(0,s.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"50.000000pt",height:"50.000000pt",viewBox:"0 0 50.000000 50.000000",preserveAspectRatio:"xMidYMid meet",children:(0,s.jsxs)("g",{transform:"translate(0.000000,50.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:[(0,s.jsx)("path",{d:"M205 417 c-27 -27 -40 -33 -65 -29 -30 4 -70 -19 -70 -40 0 -5 -16 -24 -35 -42 -51 -49 -43 -121 16 -152 32 -16 139 -19 139 -4 0 6 -27 10 -60 10 -51 0 -65 4 -85 25 -33 32 -32 70 3 105 16 15 36 40 46 55 16 24 22 27 55 21 33 -5 39 -2 50 18 23 42 92 59 144 35 29 -13 57 -58 57 -93 0 -17 5 -26 15 -26 24 0 65 -46 65 -73 0 -43 -39 -67 -108 -67 -35 0 -62 -4 -62 -10 0 -6 29 -10 66 -10 59 0 68 3 95 29 46 46 37 106 -20 136 -20 10 -31 25 -35 49 -4 22 -20 46 -42 65 -29 26 -43 31 -85 31 -44 0 -55 -4 -84 -33z"}),(0,s.jsx)("path",{d:"M215 250 c-31 -33 -27 -54 5 -25 20 18 20 18 20 -73 0 -55 4 -92 10 -92 6 0 10 37 10 92 0 91 0 91 20 73 32 -29 36 -8 5 25 -16 17 -32 30 -35 30 -3 0 -19 -13 -35 -30z"})]})})}),(0,s.jsx)("div",{children:"Drag and drop a PDF file here, or click to select one"})]})})]})})};function u(e){let{isUploadPopup:t,closePopup:r,fetchProjects:a}=e,[i,n]=(0,o.useState)({project_name:"",brand_name:"",timeline_unit:"Weeks",pdf_link:"",isPdf:!0}),l=e=>{let{id:t,value:r}=e.target;n(e=>({...e,[t]:r}))},p=async e=>{e.preventDefault();try{let e=(0,d.rJ)(c.db,"projects");await (0,d.gS)(e,{...i,created_at:new Date}),console.log(i),n({project_name:"",brand_name:"",timeline_unit:"Weeks",pdf_link:"",isPdf:!0}),r(),a()}catch(e){console.error("Error adding project:",e),alert("Error adding project")}},[h,u]=(0,o.useState)(!1),[x,g]=(0,o.useState)(!1),v=e=>{l({target:{id:"timeline_unit",value:e}}),u(!1)};return(0,s.jsxs)("div",{className:"upload-popup-wrapper popup-form ".concat(t?"active":""),children:[(0,s.jsx)("div",{className:"close-cta",onClick:r,children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,s.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,s.jsxs)("g",{id:"Menu / Close_MD",children:[" ",(0,s.jsx)("path",{id:"Vector",d:"M18 18L12 12M12 12L6 6M12 12L18 6M12 12L6 18",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})," "]})," "]})]})}),(0,s.jsxs)("form",{id:"projectForm",className:"pdf-form",onSubmit:p,children:[(0,s.jsxs)("div",{class:"form-div",children:[(0,s.jsx)("label",{for:"project_name",children:"Project Name:"}),(0,s.jsx)("div",{class:"form-div-input",children:(0,s.jsx)("input",{type:"text",id:"project_name",placeholder:"Project Name",value:i.project_name,onChange:l})})]}),(0,s.jsxs)("div",{class:"form-div",children:[(0,s.jsx)("label",{for:"brand_name",children:"Brand Name:"}),(0,s.jsxs)("div",{class:"form-div-input",children:[(0,s.jsx)("input",{type:"text",id:"brand_name",placeholder:"Brand Name",required:"",value:i.brand_name,onChange:l}),(0,s.jsx)("div",{class:"caption-text",children:"Enter the brand name e.g. TVS"})]})]}),(0,s.jsxs)("div",{className:"form-div",children:[(0,s.jsx)("label",{htmlFor:"timeline_duration",children:"Project Timeline:"}),(0,s.jsxs)("div",{className:"timeline-container",children:[(0,s.jsx)("input",{type:"number",id:"timeline_duration",value:i.timeline_duration||"",onChange:l,placeholder:"Enter duration",required:!0,min:"1"}),(0,s.jsxs)("div",{className:"custom-dropdown ".concat(h?"open":""),onClick:()=>u(!h),children:[(0,s.jsxs)("div",{className:"selected-option",children:[i.timeline_unit||"Weeks",(0,s.jsx)("span",{className:"arrow",children:"â–¼"})]}),h&&(0,s.jsxs)("div",{className:"dropdown-options",children:[(0,s.jsx)("div",{className:"dropdown-option",onClick:()=>v("Weeks"),children:"Weeks"}),(0,s.jsx)("div",{className:"dropdown-option",onClick:()=>v("Months"),children:"Months"})]})]})]})]}),(0,s.jsxs)("div",{className:"form-div",children:[(0,s.jsx)("label",{children:"Upload PDF:"}),(0,s.jsx)(m,{setFormData:n,setLoading:g,loading:x})]}),(0,s.jsx)("div",{className:"btn-submit",children:x?(0,s.jsx)("div",{className:"submit-btn",children:(0,s.jsx)("div",{className:"loading-comp",children:(0,s.jsx)(j.A,{})})}):(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:"submit-btn",children:"Add Project"})})})]})]})}function x(e){let{isDeletePopup:t,closeDeletePopup:r,handleDelete:a,deleteProId:i}=e;return(0,s.jsxs)("div",{className:"delete-popup-wrapper ".concat(t?"active":""),children:[(0,s.jsxs)("div",{className:"delete-pop",children:[(0,s.jsx)("div",{children:"Are you sure you want to delete?"}),(0,s.jsx)("button",{className:"delete-project-button",onClick:function(){a(i),r(!0)},children:"Delete"})]}),(0,s.jsx)("div",{className:"close-cta",onClick:r,children:(0,s.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,s.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,s.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,s.jsxs)("g",{id:"Menu / Close_MD",children:[" ",(0,s.jsx)("path",{id:"Vector",d:"M18 18L12 12M12 12L6 6M12 12L18 6M12 12L6 18",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})," "]})," "]})]})})]})}function g(){let e=(0,h.useRouter)(),[t,r]=(0,o.useState)(!1),[a,n]=(0,o.useState)(!1),[j,m]=(0,o.useState)([]),[g,v]=(0,o.useState)(""),f=async()=>{try{let e=(0,d.rJ)(c.db,"projects"),t=(await (0,d.GG)(e)).docs.map(e=>({id:e.id,...e.data()}));console.log(t),m(t)}catch(e){console.error("Error fetching projects: ",e)}},w=async e=>{try{let t=(0,d.H9)(c.db,"projects",e);await (0,d.kd)(t),f()}catch(e){console.error("Error deleting project:",e),alert("Error deleting project")}},_=e=>{n(!0),v(e)};return(0,o.useEffect)(()=>{f()},[]),(0,o.useEffect)(()=>{"admin"!==localStorage.getItem("role")&&e.push("/")},[e]),(0,s.jsxs)("div",{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"Internal Project"}),(0,s.jsx)("meta",{name:"description",content:"Onething Internal Projects"}),(0,s.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico",type:"image/x-icon"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico",type:"image/x-icon"})]}),(0,s.jsxs)("main",{children:[(0,s.jsxs)("div",{className:"container-homepage ".concat(t?"overflow-hidden":""),children:[(0,s.jsxs)("div",{className:"container-head",children:[(0,s.jsx)("div",{className:"cta-wrapper",children:(0,s.jsx)("a",{className:"bttn bttn-primary",href:"/form",children:"Add New +"})}),(0,s.jsx)("div",{className:"cta-wrapper",onClick:()=>{r(!0)},children:(0,s.jsxs)("a",{className:"bttn bttn-primary",children:["Upload ",(0,s.jsx)("img",{src:"/images/upload.svg"})]})})]}),(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Project Name"}),(0,s.jsx)("th",{children:"Brand Name"}),(0,s.jsx)("th",{children:"Duration"}),(0,s.jsx)("th",{children:"Date Created"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{id:"projectTableBody",children:j.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.project_name||"---"}),(0,s.jsx)("td",{children:e.brand_name||"---"}),(0,s.jsxs)("td",{children:[e.timeline_duration||"---"," ",e.timeline_unit||"---"]}),(0,s.jsx)("td",{children:e.created_at&&e.created_at.seconds?(0,p.GP)(new Date(1e3*e.created_at.seconds),"d MMM, yyyy"):"---"}),(0,s.jsx)("td",{className:"view-td",children:(0,s.jsxs)(l(),{href:"/project-detail/".concat(e.id),target:"_blank",children:["View Page"," ",(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"76",height:"69",viewBox:"0 0 76 69",fill:"none",children:(0,s.jsx)("path",{d:"M43.5516 66.4511C43.6083 66.5145 45.3489 66.9993 47.419 67.528C49.4895 68.0566 51.2059 68.4084 51.2335 68.3102C51.2608 68.2117 51.475 66.6151 51.7093 64.7619C52.1798 61.0405 53.3191 56.6955 54.5365 53.978C58.3312 45.5091 65.1396 39.9015 73.3972 38.444L75.5 38.0728V34.3316V30.5902L73.5941 30.2349C61.1075 27.9073 52.9669 17.5336 51.444 2.0093C51.3447 0.995579 51.2258 0.166439 51.1801 0.166439C50.759 0.166439 43.781 2.03495 43.6491 2.18297C43.5537 2.29 43.6246 3.24033 43.8071 4.29445C45.8263 15.967 51.6078 25.4653 59.1104 29.4367L60.9101 30.3894L23.9017 30.464L0.5 30.5114V38.0829L23.9619 38.1303L60.883 38.2052L58.6109 39.4843C52.7166 42.8023 48.05 49.311 45.3018 58.0474C44.5187 60.5363 43.337 66.2105 43.5516 66.4511Z",fill:"#E2E2E2"})})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{className:"delete-wrapper",onClick:()=>_(e.id),children:(0,s.jsx)("img",{src:"/images/delete.svg",alt:"delete"})})})]},e.id))})]})]}),(0,s.jsx)("div",{class:"blur-overlay ".concat(t?"active":"")}),(0,s.jsx)(u,{closePopup:()=>{r(!1)},isUploadPopup:t,fetchProjects:f}),(0,s.jsx)(x,{handleDelete:w,isDeletePopup:a,closeDeletePopup:()=>{n(!1)},deleteProId:g})]})]})}},9639:(e,t,r)=>{"use strict";r.d(t,{db:()=>n});var s=r(223),a=r(2405);r(5904);let i=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyCPAowvd3HckO9Xhbc3o_F7RHjzEchKtpg",authDomain:"onething-proposals.firebaseapp.com",projectId:"onething-proposals",storageBucket:"onething-proposals.firebasestorage.app",messagingSenderId:"1085696405004",appId:"1:1085696405004:web:d0e97e78e0f501f40cc829"}),n=(0,a.aU)(i)}},e=>{var t=t=>e(e.s=t);e.O(0,[883,569,139,636,593,792],()=>t(4370)),_N_E=e.O()}]);